---
layout: post
category : IT
tags : [beginner, DOS, rename]
---
{% include JB/setup %}

今天项目中遇到一个问题，在e:\test文件夹下有很多图片，图片名为Wind1\*，需要将Wind1改为Wind，即将Wind后的1去掉。
由于文件量大，手工改肯定不行，于是想到用dos命令。


dos中批量改文件名的命令式ren(rename)。

代码如下：

    rename Wind1* Wind*
    
运行之后可以发现没有任何效果，它只是将Wind1\*中的前四个字符改为Wind\*中的前四个字符，其他不变。

进一步讲，如果Wind1后面的字符串不是固定不变的，就必须要用到通配符\*，进而导致文件名只会替换前面的n个字符。

于是只能写个批处理程序，代码：

    @echo off & setlocal EnableDelayedExpansion
    e:
    cd e:\test
    for /f %%i in ('dir e:\test\Wind1*.txt /b') do (
    set oldname=%%i
    set newname=!oldname:Wind1=Wind!
    rename !oldname! !newname!
    echo !oldname!
    echo !newname!
    )
    pause

1. @echo off & setlocal EnableDelayedExpansion
   关闭命令回显，并启用变量延迟

2. for /f %%i in ('dir e:\\test\\Wind1\*.txt /b') do (
   遍历e:\\test文件夹，获取满足Wind1\*.txt的文件，赋值给i
   
3. set oldname=%%i
   把%%i的值赋予给变量n
   

## link

[变量延迟详解](http://www.cn-dos.net/forum/viewthread.php?tid=28273)

[什么情况下该使用变量延迟 by willsort](http://www.cn-dos.net/forum/viewthread.php?tid=20733)

dos help dir (/b只显示文件名) 
